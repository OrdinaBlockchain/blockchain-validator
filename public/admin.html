<!DOCTYPE HTML>
<!--
	Prologue by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>

<head>
    <title>Ordina-Blockchain-Admin-Panel</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
    <link rel="stylesheet" href="assets/css/main.css" />
    <!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
    <!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
</head>

<body>

    <!-- Header -->
    <div id="header">

        <div class="top">

            <!-- Logo -->
            <div id="logo">
                <h1 id="node-id"></h1>
                <p id="node-status"></p>
            </div>
            <!-- Nav -->
            <nav id="nav">
                <!--

								Prologue's nav expects links in one of two formats:

								1. Hash link (scrolls to a different section within the page)

								   <li><a href="#foobar" id="foobar-link" class="icon fa-whatever-icon-you-want skel-layers-ignoreHref"><span class="label">Foobar</span></a></li>

								2. Standard link (sends the user to another page/site)

								   <li><a href="http://foobar.tld" id="foobar-link" class="icon fa-whatever-icon-you-want"><span class="label">Foobar</span></a></li>

							-->
                <ul>
                    <li>
                        <a href="#top" id="top-link" class="skel-layers-ignoreHref">
                            <span class="icon fa-home">Home</span>
                        </a>
                    </li>
                    <li>
                        <a href="#admin-wallet" id="portfolio-link" class="skel-layers-ignoreHref">
                            <span class="icon fa-th">Admin Wallet</span>
                        </a>
                    </li>
                    <li>
                        <a href="#send-snowflakes" id="about-link" class="skel-layers-ignoreHref">
                            <span class="icon fa-envelope">Send Snowflakes</span>
                        </a>
                    </li>
                    <li>
                            <a href="#send-frost" id="about-link" class="skel-layers-ignoreHref">
                                <span class="icon fa-envelope">Send Snowflakes</span>
                            </a>
                        </li>
                    <li>
                        <a href="#chain" id="contact-link" class="skel-layers-ignoreHref">
                            <span class="icon fa-link">Chain</span>
                        </a>
                    </li>
                    <li>
                        <a href="#sign-transaction" id="contact-link" class="skel-layers-ignoreHref">
                            <span class="icon fa-key">Sign Transaction</span>
                        </a>
                    </li>
                    <li>
                        <a href="#logs" id="contact-link" class="skel-layers-ignoreHref">
                            <span class="icon fa-terminal">Logs</span>
                        </a>
                    </li>

                </ul>
            </nav>
        </div>

        <div class="bottom">
            <!-- Social Icons -->
            <ul class="icons">
                <li>
                    <a href="#" class="icon fa-twitter">
                        <span class="label">Portal</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="icon fa-facebook">
                        <span class="label">Ordina</span>
                    </a>
                </li>
                <li>
                    <a href="https://github.com/OrdinaBlockchain/blockchain-validator" class="icon fa-github">
                        <span class="label">Github</span>
                    </a>
                </li>
            </ul>
        </div>

    </div>

    <!-- Main -->
    <div id="main">
        <!-- Intro -->
        <section id="top" class="one dark cover">
            <div class="container">
                <header>
                    <h2 class="alt">Thanks for using the
                        <strong>Ordina Blockchain</strong>
                    </h2>
                </header>
            </div>
        </section>

        <!-- Portfolio -->
        <section id="admin-wallet" class="two">
            <div class="container">

                <header>
                    <h2>Admin Wallet</h2>
                </header>

                <p>Here you can manage the Admin wallet</p>
                <div align="left">
                    <table>
                        <tr>
                            <td>Wallet Address:</td>
                            <td id="genesis-address">SNOWABCDE</td>
                        </tr>
                        <tr>
                            <td>Snowflakes:</td>
                            <td id="genesis-balance">1234</td>
                        </tr>
                    </table>
                </div>
            </div>
        </section>

        <!-- About Me -->
        <section id="send-snowflakes" class="three">
            <div class="container">

                <header>
                    <h2>Send Snowflakes</h2>
                </header>
                <p>Set the public key and amount for the <strong>Snowflake</strong> you wish to make</p>
                <form method="post" action="#">
                    <div class="row">
                        <div class="6u 12u$(mobile)">
                            <input type="text" name="transaction-public-key" placeholder="Public-Key" />
                        </div>
                        <div class="6u$ 12u$(mobile)">
                            <input type="text" name="transaction-amoun" placeholder="amount" />
                        </div>
                        <div class="12u$">
                            <input type="submit" value="Generate transaction" />
                        </div>
                    </div>
                </form>
            </div>
        </section>

        <section id="send-frost" class="four">
                <div class="container">
    
                    <header>
                        <h2>Send Frost</h2>
                    </header>
                    <p>Set the public key and amount for the <strong>Frost</strong> transaction you wish to make</p>
                    <form method="post" action="#">
                        <div class="row">
                            <div class="6u 12u$(mobile)">
                                <input type="text" name="transaction-public-key" placeholder="Public-Key" />
                            </div>
                            <div class="6u$ 12u$(mobile)">
                                <input type="text" name="transaction-amoun" placeholder="amount" />
                            </div>
                            <div class="12u$">
                                <input type="submit" value="Generate transaction" />
                            </div>
                        </div>
                    </form>
                </div>
            </section>

        <!-- Contact -->
        <section id="chain" class="two">
            <div class="container">

                <header>
                    <h2>Chain</h2>
                </header>

                <p>Here you can gain insight in the Ordina Blockchain</p>

                <form method="post" action="#">
                    <div class="row">
                        <div class="6u 12u$(mobile)">
                            <input type="text" name="name" placeholder="Name" />
                        </div>
                        <div class="6u$ 12u$(mobile)">
                            <input type="text" name="email" placeholder="Email" />
                        </div>
                        <div class="12u$">
                            <textarea name="message" placeholder="Message"></textarea>
                        </div>
                        <div class="12u$">
                            <input type="submit" value="Send Message" />
                        </div>
                    </div>
                </form>

            </div>
        </section>

        <section id="sign-transaction" class="three">
            <div class="container">

                <header>
                    <h2>Sign-Transaction</h2>
                </header>
                <p>Set the public key and amount for the transaction you wish to make</p>
                <form method="post" action="#">
                    <div class="row">
                        <div class="12u$">
                            <textarea name="transaction-data" placeholder="Transaction-data"></textarea>
                        </div>
                        <div class="6u 12u$(mobile)">
                            <input type="password" name="private-key" placeholder="Private-Key" />
                        </div>
                        <div class="12u$">
                            <input type="submit" value="Sign Transaction" />
                        </div>
                    </div>
                </form>
            </div>
        </section>

        <section id="logs" class="four">
            <div class="container">

                <header>
                    <h2>Logs</h2>
                </header>
                <p>Access the logs below</p>
                <div class="row">
                    <div class="12u$">
                        <textarea name="logs" id="logs"></textarea>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <div id="footer">

        <!-- Copyright -->
        <ul class="copyright">
            <li>&copy; Untitled. All rights reserved.</li>
            <li>Design:
                <a href="http://html5up.net">HTML5 UP</a>
            </li>
        </ul>

    </div>

    <!-- Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery.scrolly.min.js"></script>
    <script src="assets/js/jquery.scrollzer.min.js"></script>
    <script src="assets/js/skel.min.js"></script>
    <script src="assets/js/util.js"></script>
    <!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
    <script src="assets/js/main.js"></script>
    <script type="text/javascript" src="/socket.io/socket.io.js"></script>
    <script type="text/javascript">
        console.log("Trying to connect");
        const socket = io.connect();
        socket.on('connect', () => {
            console.log("connected");
            socket.on('disconnect', () => {
                document.getElementById('server-status').innerText = 'Offline';
                document.getElementById('node-id').innerText = '-';
                document.getElementById('node-port').innerText = '-';
                document.getElementById('node-isbackup').innerText = '-';
                document.getElementById('node-status').innerText = '-';
            });

            socket.on('node-initialized', (data) => {
                data = JSON.parse(data.toString('utf8'));
                document.getElementById('node-id').innerText = data.id;
                //document.getElementById('node-port').innerText = data.port;
                //document.getElementById('node-isbackup').innerText = data.isBackup;
                document.getElementById('node-status').innerText = 'Disconnected';
            });

            socket.on('logging', (data) => {
                document.getElementById('logging-container').innerHTML += data.toString('utf8') + '<br>';
            })

            socket.on('node-connected', (data) => {
                document.getElementById('node-status').innerText = 'Connected';
            });

            socket.on('node-disconnected', (data) => {
                document.getElementById('node-status').innerText = 'Disconnected';
            });


            // const initNodeForm = document.querySelector('#init-node-form');
            // initNodeForm.addEventListener('submit', submitNodeData);
            // const broadcastMessageForm = document.querySelector('#message-broadcast-form');
            // broadcastMessageForm.addEventListener('submit', broadcastMessage);

            function submitNodeData(event) {
                event.preventDefault();
                const isBackup = document.querySelector('#node-data-isbackup').checked;
                const host = document.querySelector('#node-data-host').value;
                const port = document.querySelector('#node-data-port').value;
                const backup1_port = document.querySelector('#node-data-backup1_port').value;
                const backup1_host = document.querySelector('#node-data-backup1_host').value;
                const backup2_port = document.querySelector('#node-data-backup2_port').value;
                const backup2_host = document.querySelector('#node-data-backup2_host').value;

                socket.emit('node-data', JSON.stringify({
                    isBackup: isBackup,
                    host: host,
                    port: port,
                    backup1_port: backup1_port,
                    backup1_host: backup1_host,
                    backup2_port: backup2_port,
                    backup2_host: backup2_host
                }));

                // Change elements on webpage
                document.getElementById('init-node-form').style.display = 'none';
                document.getElementById('message-broadcast-form').style.display = 'initial'
                document.getElementById('logging-container').style.display = 'initial'
            }

            function broadcastMessage(event) {
                event.preventDefault();
                const message = document.querySelector('#message').value;
                socket.emit('broadcast-message', JSON.stringify({
                    message: message
                }));
            }
        });
    </script>

</body>

</html>